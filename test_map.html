<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <script type="text/javascript" src="core.js">
        </script>
        <style>
            #game {
                border-style: solid;
                border-right-width: 1px;
				border-bottom-width: 1px;
            }
        </style>
    </head>
    <body style="margin:0;">
        <canvas id="game" width="500" height="500">
        </canvas>
        <canvas id="map" style="display:none" width="2000" height="2000">
        </canvas>        
        <script>
        </script>
        <script>
            /*
             var img = new Image();
             img.src = "resource/model01.png"
             var canvas = document.getElementById("game")
             var cxt = canvas.getContext('2d');
             var x = 0;
             var y = 0;
             function test(){
             cxt.drawImage(img, x,y,1000 ,1000);
             x = x - 2; y = y -2
             setTimeout("test()", 40)
             }
             
             test();
             */
            var canvas = document.getElementById("game")
            var mapcanvas = document.getElementById("map")
            var map = new game.Map(5, mapcanvas);
            
            var comp01 = new game.Comp();
            
            comp01.size = 100;
            var img = new Image();
            img.src = "resource/model01.png"
            comp01.img_current = img;
            map.addComp(0, 0, comp01);
            
            var comp02 = new game.Comp();
            
            comp02.size = 100;
            var img2 = new Image();
            img2.src = "resource/model02.png"
            comp02.img_current = img2;
            map.addComp(110, 110, comp02);
            
            
            
            
            map.createMapImg();
            
            var display = new game.Display(mapcanvas, canvas);
            
            var JSX, JSY;
            JSX = 0;
            JSY = 0;
            canvas.onmouseover = function(e){
                //alert(0 < e.clientX < 30);
                if (e.clientX > 0 && e.clientX < 30) 
                    JSX = -3;
                if (e.clientY > 0 && e.clientY < 30) 
                    JSY = -3;
                if (e.clientX > 470 && e.clientX < 500) 
                    JSX = 3;
                if (e.clientY > 470 && e.clientY < 500) 
                    JSY = 3;
                if (e.clientX > 31 && e.clientX < 470) 
                    JSX = 0;
                if (e.clientY > 31 && e.clientY < 470) 
                    JSY = 0;
                
                
            }
            
			 canvas.onmouseout = function(e){
			    JSX =0 ; JSY = 0;
			 }
			
            canvas.onmousemove = function(e){
                //alert(0 < e.clientX < 30);
               if (e.clientX > 0 && e.clientX < 30) 
                    JSX = -3;
                if (e.clientY > 0 && e.clientY < 30) 
                    JSY = -3;
                if (e.clientX > 470 && e.clientX < 500) 
                    JSX = 3;
                if (e.clientY > 470 && e.clientY < 500) 
                    JSY = 3;
                if (e.clientX > 31 && e.clientX < 470) 
                    JSX = 0;
                if (e.clientY > 31 && e.clientY < 470) 
                    JSY = 0;
                //alert(JSY);
            }
            
            function dx(){
                // alert(JSX);
                display.info.x = display.info.x + JSX < 0 ? 0 : display.info.x + JSX;
                display.info.y = display.info.y + JSY < 0 ? 0 : display.info.y + JSY;
                display.draw();
                //alert(display.info.x);
                setTimeout("dx()", 40)
            };
            dx();
        </script>
		<br>
		<div style="padding:9px;">把鼠标放在画布四周边缘和四脚，可以控制遍历地图的体验。</div>
    </body>
</html>
